<div class="register-page">
  <div class="background-blur">
    <div class="blur-circle blur-circle-1"></div>
    <div class="blur-circle blur-circle-2"></div>
    <div class="blur-circle blur-circle-3"></div>
    <div class="blur-overlay"></div>
  </div>
  <!-- Header con navegaciÃ³n -->
  <header class="register-header">
    <nav class="register-navbar">
      <button class="back-btn" (click)="onBackToHome()">
        â† Volver
      </button>
      
      <a href="/" class="logo-register">
         <span class="u-part">U</span><span class="x-part">X</span><span class="t-part">T</span><span class="racks-part">racks</span>
      </a>
      
      <div class="header-links">
        <a href="#manual">Manual de usuario</a>
        <button class="btn-header-login" (click)="onLogin($event)">Iniciar sesiÃ³n</button>
      </div>
    </nav>
  </header>

  <!-- Contenedor principal del registro -->
  <main class="register-main">
    <div class="register-container">
      <!-- Card de registro -->
      <div class="register-card">
        <!-- Logo dentro de la card -->
        <div class="register-card-header">
          <div class="logo-card">
            <span class="ux-part">UX</span><span class="t-part">T</span>
          </div>
          <h1>Crear cuenta</h1>
          <p class="register-subtitle">Registrate para acceder a nuestros servicios y conocer el comportamiento de tus usuarios</p>
        </div>

        <!-- Mensaje de Ã©xito -->
        <div class="success-message" *ngIf="registerSuccess">
          <div class="success-icon">âœ…</div>
          <h3>Â¡Registro exitoso!</h3>
          <p>Tu cuenta ha sido creada correctamente. Te redirigiremos al inicio de sesiÃ³n...</p>
        </div>

        <!-- Formulario -->
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form" *ngIf="!registerSuccess">
          <!-- Campo Nombre de Usuario -->
          <div class="form-group">
            <label for="username">Nombre de usuario</label>
            <div class="input-wrapper">
              <input
                type="text"
                id="username"
                formControlName="username"
                class="form-input"
                [class.error]="username?.touched && username?.errors"
                placeholder="Elige un nombre de usuario"
                autocomplete="username"
              />
              <span class="input-icon">ğŸ‘¤</span>
            </div>
            <div class="error-message" *ngIf="username?.touched && username?.errors">
              {{ getErrorMessage('username') }}
            </div>
          </div>

          <!-- Campo Email -->
          <div class="form-group">
            <label for="email">Correo electrÃ³nico</label>
            <div class="input-wrapper">
              <input
                type="email"
                id="email"
                formControlName="email"
                class="form-input"
                [class.error]="email?.touched && email?.errors"
                placeholder="tu@email.com"
                autocomplete="email"
              />
              <span class="input-icon">ğŸ“§</span>
            </div>
            <div class="error-message" *ngIf="email?.touched && email?.errors">
              {{ getErrorMessage('email') }}
            </div>
          </div>

          <!-- Campo ContraseÃ±a -->
          <div class="form-group">
            <label for="password">ContraseÃ±a</label>
            <div class="input-wrapper">
              <input
                [type]="showPassword ? 'text' : 'password'"
                id="password"
                formControlName="password"
                class="form-input"
                [class.error]="password?.touched && password?.errors"
                placeholder="MÃ­nimo 8 caracteres"
                autocomplete="new-password"
              />
              <button
                type="button"
                class="password-toggle"
                (click)="togglePasswordVisibility()"
                [attr.aria-label]="showPassword ? 'Ocultar contraseÃ±a' : 'Mostrar contraseÃ±a'"
              >
                {{ showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
              </button>
            </div>
            
            <!-- Indicador de fortaleza de contraseÃ±a -->
            <div class="password-strength" *ngIf="password?.value">
              <div class="strength-bar">
                <div class="strength-fill" [class]="getPasswordStrengthClass()"></div>
              </div>
              <span class="strength-text" [class]="getPasswordStrengthClass()">
                Seguridad: {{ getPasswordStrength() }}
              </span>
            </div>
            
            <div class="error-message" *ngIf="password?.touched && password?.errors">
              {{ getErrorMessage('password') }}
            </div>
          </div>

          <!-- Campo Confirmar ContraseÃ±a -->
          <div class="form-group">
            <label for="confirmPassword">Confirmar contraseÃ±a</label>
            <div class="input-wrapper">
              <input
                [type]="showConfirmPassword ? 'text' : 'password'"
                id="confirmPassword"
                formControlName="confirmPassword"
                class="form-input"
                [class.error]="(confirmPassword?.touched && confirmPassword?.errors) || hasFormError('passwordMismatch')"
                placeholder="Repite tu contraseÃ±a"
                autocomplete="new-password"
              />
              <button
                type="button"
                class="password-toggle"
                (click)="toggleConfirmPasswordVisibility()"
                [attr.aria-label]="showConfirmPassword ? 'Ocultar contraseÃ±a' : 'Mostrar contraseÃ±a'"
              >
                {{ showConfirmPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
              </button>
            </div>
            <div class="error-message" *ngIf="confirmPassword?.touched && confirmPassword?.errors">
              {{ getErrorMessage('confirmPassword') }}
            </div>
            <div class="error-message" *ngIf="hasFormError('passwordMismatch')">
              Las contraseÃ±as no coinciden
            </div>
          </div>

          <!-- TÃ©rminos y condiciones -->
          <div class="form-group">
  <label class="checkbox-wrapper">
    <input
      type="checkbox"
      formControlName="acceptTerms"
      class="checkbox-input"
    />

    <span class="checkbox-custom"></span>

    <span class="checkbox-text">
      Acepto los
      <a href="#" class="terms-link">tÃ©rminos y condiciones</a>
      y la
      <a href="#" class="terms-link">polÃ­tica de privacidad</a>
    </span>
  </label>
</div>



           
          

          <!-- Error general -->
          <div class="register-error" *ngIf="registerError">
            {{ registerError }}
          </div>

          <!-- BotÃ³n de registrarse -->
          <button
            type="submit"
            class="btn-register"
            [disabled]="isLoading || !registerForm.valid"
            [class.loading]="isLoading"
          >
            <span *ngIf="!isLoading">Registrarse</span>
            <span *ngIf="isLoading" class="loading-spinner">â³ Creando cuenta...</span>
          </button>
        </form>
        <!-- Link de login (solo si no hay Ã©xito) -->
        <div class="login-footer" *ngIf="!registerSuccess">
          <p>
            Â¿Ya tienes una cuenta? 
            <button type="button" class="login-link" (click)="onLogin($event)">
              Iniciar sesiÃ³n
            </button>
          </p>
        </div>
      </div>
    </div>
  </main>
</div>